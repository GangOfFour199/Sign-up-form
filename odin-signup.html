<!DOCTYPE html> <!-- Always include to get most up to date os on computer-->
<html lang="en" >
<head>
  <meta charset="UTF-8"> <!-- specifies character encoding, 99% time use "UTF-8"--> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- Latest version of IE-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- ensures it scales to screen size-->
  <title>Sandinista Technologies</title>
  <link rel="stylesheet" href="odin-signup.css"> <!--always link CSS to HTML-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Abel&family=Playwrite+IS:wght@100..400&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
<body>
<div class="main">
    <div class="side-image">
      <div>
      <!--used wbepage url path for image, can do absolute/relative via file directory-->
      <img src="https://cdn.statically.io/gh/TheOdinProject/curriculum/5f37d43908ef92499e95a9b90fc3cc291a95014c/html_css/project-sign-up-form/odin-lined.png" alt="The Odin Project">
      <h1>Sandinista Technologies</h1>
      </div>
      <p>Photo courtesy of Suzanne Jones via The Travel Bunny. All rights reserved.</p>
      </div>
  <div class="form-content">
    <div class="form-headline">
      <div>
      <p>Are you ready for an opportunity of a lifetime?</p>
      <p>Discover your true calling, augment your skills and be a part of innovating our society like never before.</p> 
        <h3>Sounds exciting?</h3>   
      <p>Well, your future career is only a <em>couple clicks</em> away!</p>
      </div>
    </div>
    <div>
      <div class="input-outline">
        <p><strong>LET'S BEGIN</strong></p>
        <form id="sandinista-form">
          <label for="forename"><strong>Forename</strong>
            <input type="text" id="forename" name="forename" required> <!--add required prop-->
            <div id=forename-error' class='error'></div>
          </label>
          <label for="surname"><strong>Surname</strong>
            <input type="text" id="surname" name="surname" required>
            <div id="surname-error" clas='error'></div>
          </label>
          <label for="email"><strong>Email</strong>
            <input type="email" id="email" name="email" required>
            <div id="email-error" class='error' required></div>
          </label>
          <label for="region"><strong>Region</strong>
            <div id="region-error" class="error"></div>
            <select id="region" name="region">
              <option value="Europe">Europe</option>
              <option value="North-America">North America</option>
              <option value="Central-America-&-The-Caribbean">Central America & The Caribbean</option>
              <option value="South-America">South America</option>
              <option value="Africa">Africa</option>
              <option value="Middle-East">Middle East</option>
              <option value="Asia">Asia</option>
              <option value="Oceania">Oceania</option>
            </select> 
          </label>
          <label for="password"><strong>Password</strong>
          <!-- setting type as password and then can add a prop to specify how value should be accepted-->
            <input type="password" id="password" name="password" requiredpattern="'(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{7,14}'">
          <!-- requiredpattern uses lookahead for digits(?=.*\d) insetad of (?=.*[0-9]). This is called a RegEx metacharacter. {n,n} specifies required length.-->
            <div id="password-error" class="error"></div>
          </label>
          <label for="confirmpassword"><strong>Confirm Password</strong> 
            <input type="password" id="confirmpassword" name="confirmpassword" requiredpattern='(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{7,14}'>
            <div id="confirmpassword-error" class="error"></div>
          <!-- ensure id="__error" and class="error" so we can add event listeners/test for errors-->
          </label>
        </form>
      </div>
    </div>
    </div>
    <div class="submit-section">
      <div>
        <button type="submit" form="sandinista-form"><strong>Create Account</strong></button>
        <p>Already signed up? <a href="">Login</a> here</p>
        <!-- add hyperlink to redirect to correct page-->
      </div>
    </div>
</div>
<script>
  // Use js comment syntax as we are in <script> //
  // Create variables for event listeners, use if/else statements. function(event){}
  const pw = document.querySelector('#password');
  const pwConfirmed = document.querySelector('#confirmpassword');
  const firstname = document.querySelector('#forename');
  const lastname = document.querySelector('#surname');
  const email = document.querySelector('#email');
  const region = document.querySelector('#region');
  const pwError = document.querySelector('#password-error');
  const pwConfirmedError = document.querySelector('#confirmpassword-error');
  const firstnameError = document.querySelector('#forename-error');
  const lastnameError = document.querySelector('#lastname-error');
  const emailError = document.querySelector('#emial-error');
  const regionError = document.querySelector('#region-error');

  firstname.addEventListener("input", function(event) {
    if(firstname.value === "") {
  // .textContent gives input on screen
      firstnameError.textContent = 'Please input your forename.';
    } else {
      firstnameError.textContent = '';
    }
  });

  lastname.addEventListener("input", function(event) {
    if(lastname === '') {
      lastnameError.textContent = 'Please input your surname.';
    } else {
      lastnameError.textContent = '';
    }
  });

  email.addEventListener("input", function(event) {
  // if type="email" is properly formatted
    if (email.validity.typeMismatch) {
      emailError.textContent = 'Please provide a valid email address. Example: markgalloway@gmail.com.';
    } else {
      email.textContent = '';
    }
  });

  region.addEventListener("input", function(event) {
    if (region.value === '') {
      regionError.textContent = 'Please input your region';
    } else {
      regionError.textContent = '';
    }
  });

  pw.addEventListener("input", function(event){
    if(pw.validity.patternMismatch) {
      const currentValue = pw.value;
      const regExpCap = [A-Z]/g; //registered Expected Capitals & Digits
      const regExpDig = [0-9]/g; //[] array of char needed, /g means Global
      let result = '';

      if (regExpCap.test(currentValue)) { 
        result += '';
      } else {
        result += 'Missing at least 1 capital letter. ';
        result += '\n';
      }

      if (regExpDig.test(currentValue)) {
        result += '';
      } else {
        result += 'Missing at least 1 number. ';
        result += '\n';
      } 

      if (currentValue.length < 7) {
        result += 'Password must contain at least 7 characters. ';
        result += '\n';
      } else {
        result += '';
      }

      if (currentValue.length > 14) {
        result += 'Password must not contain more than 14 characters ';
        result += '\n';
      } else {
        result += '';
      }

      console.log(result);
      pwError.textContent = result;

      } else {
        pwError.textContent= '';
      }
    });
  
    pwConfirmed.addEventListener("input", function(event) {
      if(pwConfirmed.value !== pw.value) {
        pwConfirmedError.textContent = 'Passwords do not match';
      } else {
        pwConfirmedError.textContent = '';
      }
    }); 

  </script>
</body>
</html>